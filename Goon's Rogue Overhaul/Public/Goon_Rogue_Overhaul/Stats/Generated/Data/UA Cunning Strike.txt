new entry "Interrupt_DWE_SneakAttack"
type "InterruptData"
using "Interrupt_DWE_SneakAttack"
// data "DisplayName" "hc999d4c5ga839g45afgb385g5f648e0bb34b;1"
// data "Description" "h3c64245ag90fag473cg8094g513b6a73d5e2;1"
// data "DescriptionParams" "LevelMapValue(DWE_SneakAttack)"
// data "Icon" "DWE_UACunningStrike_SneakAttack"
// data "InterruptContext" "OnCastHit"
// data "InterruptContextScope" "Self"
// data "Container" "YesNoDecision"
// data "Conditions" "DWE_SneakAttackInterruptCondition() and not IsKillingBlow()"
data "Conditions" "(Player(context.Observer) or not HasStatus('SG_Invisible',context.Observer)) and Self(context.Source,context.Observer) and not Self() and HasDamageEffectFlag(DamageFlags.Hit) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandWeaponAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or IsThrowAttackRoll() or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedWeaponAttack()) or (Goon_IsDruidWildshape(context.Observer) and (IsMeleeAttack() or IsRangedAttack()) and (IsDamageTypePiercing() or IsDamageTypeSlashing() or IsDamageTypeBludgeoning()))) and not IsKillingBlow() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not AnyEntityIsItem() and not Goon_IsSneakAttackSpell() or (DWE_SneakAttackInterruptCondition() and not IsKillingBlow())"
// data "Properties" "IF(IsAttackType(AttackType.MeleeWeaponAttack)):DealDamage(LevelMapValue(DWE_SneakAttack), MainMeleeWeaponDamageType,,,0,,true,true); IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack)):DealDamage(LevelMapValue(DWE_SneakAttack), OffhandMeleeWeaponDamageType,,,0,,true,true); IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(LevelMapValue(DWE_SneakAttack), MainRangedWeaponDamageType,,,0,,true,true); IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(LevelMapValue(DWE_SneakAttack), OffhandRangedWeaponDamageType,,,0,,true,true); IF(IsThrowAttackRoll()):DealDamage(LevelMapValue(DWE_SneakAttack), ThrownWeaponDamageType,,,0,,true,true); IF(HasPassive('MAG_ForcefulSneakAttack_Passive', context.Source)):DealDamage(1d4, Force,Magical,,0,,true,true)"
data "Properties" "IF(IsAttackType(AttackType.MeleeWeaponAttack) and not HasWeaponProperty(WeaponProperties.Magical, GetAttackWeapon(context.Source))):DealDamage(LevelMapValue(SneakAttack), MainMeleeWeaponDamageType,,,0,,true,true);IF(IsAttackType(AttackType.MeleeWeaponAttack) and HasWeaponProperty(WeaponProperties.Magical, GetAttackWeapon(context.Source))):DealDamage(LevelMapValue(SneakAttack), MainMeleeWeaponDamageType,Magical,,0,,true,true);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack) and not HasWeaponProperty(WeaponProperties.Magical, GetAttackWeapon(context.Source))):DealDamage(LevelMapValue(SneakAttack), OffhandMeleeWeaponDamageType,,,0,,true,true);IF(IsAttackType(AttackType.MeleeOffHandWeaponAttack) and HasWeaponProperty(WeaponProperties.Magical, GetAttackWeapon(context.Source))):DealDamage(LevelMapValue(SneakAttack), OffhandMeleeWeaponDamageType,Magical,,0,,true,true);IF(IsAttackType(AttackType.RangedWeaponAttack)):DealDamage(LevelMapValue(SneakAttack), MainRangedWeaponDamageType,,,0,,true,true);IF(IsAttackType(AttackType.RangedOffHandWeaponAttack)):DealDamage(LevelMapValue(SneakAttack), OffhandRangedWeaponDamageType,,,0,,true,true);IF(IsThrowAttackRoll() and not HasWeaponProperty(WeaponProperties.Magical, context.HitDescription.ThrownObject)):DealDamage(LevelMapValue(SneakAttack), ThrownWeaponDamageType,,,0,,true,true);IF(IsThrowAttackRoll() and HasWeaponProperty(WeaponProperties.Magical, context.HitDescription.ThrownObject)):DealDamage(LevelMapValue(SneakAttack), ThrownWeaponDamageType,Magical,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypePiercing() and not UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Piercing,,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypePiercing() and UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Piercing,Magical,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypeSlashing() and not IsDamageTypePiercing() and not UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Slashing,,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypeSlashing() and not IsDamageTypePiercing() and UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Slashing,Magical,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypeBludgeoning() and not IsDamageTypePiercing() and not IsDamageTypeSlashing() and not UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Bludgeoning,,,0,,true,true);IF(not IsWeaponAttack() and IsDamageTypeBludgeoning() and not IsDamageTypePiercing() and not IsDamageTypeSlashing() and UnarmedMagicalProperty(context.Source)):DealDamage(LevelMapValue(SneakAttack), Bludgeoning,Magical,,0,,true,true);IF(HasPassive('MAG_ForcefulSneakAttack_Passive', context.Source)):DealDamage(1d4, Force,Magical,,0,,true,true)"
// data "Cost" "SneakAttack_Charge:1"
// data "Stack" "SneakAttack"
// data "InterruptDefaultValue" "Enabled"
data "InterruptDefaultValue" "Ask;Enabled"
// data "EnableContext" "OnActionResourcesChanged;OnEquip;OnStatusApplied;OnStatusRemoved"
// data "EnableCondition" "HasActionResource('SneakAttack_Charge',1,0,false,false,context.Source) and (WieldingFinesseWeaponInSpecificHand(context.Source, false) or WieldingFinesseWeaponInSpecificHand(context.Source, true) or WieldingWeapon('Ammunition', false, true, context.Source) or SpellTypeIs(SpellType.Throw)) and not HasStatus('SG_Polymorph_BeastShape')"
data "EnableCondition" "HasActionResource('SneakAttack_Charge',1,0,false,false,context.Source) and ((WieldingFinesseWeaponInSpecificHand(context.Source, false) or WieldingFinesseWeaponInSpecificHand(context.Source, true) or WieldingWeapon('Ammunition', false, true, context.Source) or SpellTypeIs(SpellType.Throw)) and (not HasStatus('SG_Polymorph') or Goon_IsUnrestrictedPolymorphStatus())) or Goon_IsDruidWildshape()"
// data "InterruptFlags" "InterruptWhileInvisible"

new entry "Interrupt_DWE_CunningStrike_Disarm"
type "InterruptData"
// using "Interrupt_DWE_CunningStrike_Less1"
using "Interrupt_DWE_CunningStrike_Disarm"
// data "DisplayName" "hd886dfbcgfeb1g41acg9f92gccdf00084da7;1"
// data "Description" "hd3569f73g41a8g4ff1g9411g5497f807d096;1"
// data "Icon" "DWE_UACunningStrike_Disarm"
// data "Conditions" "DWE_SneakAttackInterruptCondition() and not IsKillingBlow() and DWE_HasWeaponInAnyHand()"
data "Conditions" "(Player(context.Observer) or not HasStatus('SG_Invisible',context.Observer)) and Self(context.Source,context.Observer) and not Self() and HasDamageEffectFlag(DamageFlags.Hit) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandWeaponAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or IsThrowAttackRoll() or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedWeaponAttack()) or (Goon_IsDruidWildshape(context.Observer) and (IsMeleeAttack() or IsRangedAttack()) and (IsDamageTypePiercing() or IsDamageTypeSlashing() or IsDamageTypeBludgeoning()))) and not IsKillingBlow() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not AnyEntityIsItem() and not Goon_IsSneakAttackSpell() and DWE_HasWeaponInAnyHand() or (DWE_SneakAttackInterruptCondition() and not IsKillingBlow() and DWE_HasWeaponInAnyHand())"
// data "Success" "ApplyStatus(OBSERVER_TARGET,DWE_CUNNING_STRIKE_APPLY_DISARM,100,0)"
// data "TooltipAttackSave" "Dexterity"
// data "InterruptDefaultValue" "Ask"

new entry "Interrupt_DWE_CunningStrike_Trip"
type "InterruptData"
// using "Interrupt_DWE_CunningStrike_Less1"
using "Interrupt_DWE_CunningStrike_Trip"
// data "DisplayName" "hfa8f716bg6d79g4f6cg8b58ga9078f3ae27e;1"
// data "Description" "hd3d27832g9819g45eagb2cfg5d95ab1ad57a;1"
// data "Icon" "DWE_UACunningStrike_Trip"
// data "Conditions" "DWE_SneakAttackInterruptCondition() and not IsKillingBlow() and TargetSizeEqualOrSmaller(Size.Large) and not HasStatus('SG_Prone')"
data "Conditions" "(Player(context.Observer) or not HasStatus('SG_Invisible',context.Observer)) and Self(context.Source,context.Observer) and not Self() and HasDamageEffectFlag(DamageFlags.Hit) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandWeaponAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or IsThrowAttackRoll() or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedWeaponAttack()) or (Goon_IsDruidWildshape(context.Observer) and (IsMeleeAttack() or IsRangedAttack()) and (IsDamageTypePiercing() or IsDamageTypeSlashing() or IsDamageTypeBludgeoning()))) and not IsKillingBlow() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not AnyEntityIsItem() and not Goon_IsSneakAttackSpell() and TargetSizeEqualOrSmaller(Size.Large) and not HasStatus('SG_Prone') or (DWE_SneakAttackInterruptCondition() and not IsKillingBlow() and TargetSizeEqualOrSmaller(Size.Large) and not HasStatus('SG_Prone'))" 
// data "Success" "ApplyStatus(OBSERVER_TARGET,DWE_CUNNING_STRIKE_APPLY_TRIP,100,0)"
// data "TooltipAttackSave" "Dexterity"

new entry "Interrupt_DWE_CunningStrike_Withdraw"
type "InterruptData"
// using "Interrupt_DWE_CunningStrike_Less1"
using "Interrupt_DWE_CunningStrike_Withdraw"
// data "DisplayName" "hb68edf01g9a0dg4c35gb06cg8ab2585e51c8;1"
// data "Description" "h66c557adgdaf0g429fg9515gc13c98462643;1"
// data "Icon" "DWE_UACunningStrike_Withdraw"
// data "Conditions" "DWE_SneakAttackInterruptCondition() and HasStatus('DWE_SNEAK_ATTACK_OWN_TURN',context.Source)"
data "Conditions" "(Player(context.Observer) or not HasStatus('SG_Invisible',context.Observer)) and Self(context.Source,context.Observer) and not Self() and HasDamageEffectFlag(DamageFlags.Hit) and ((WieldingFinesseWeaponInSpecificHand(context.Observer,false) and IsMainHandWeaponAttack()) or (WieldingFinesseWeaponInSpecificHand(context.Observer,true) and IsOffHandAttack()) or IsThrowAttackRoll() or (WieldingWeapon('Ammunition', false, true, context.Observer) and IsRangedWeaponAttack()) or (Goon_IsDruidWildshape(context.Observer) and (IsMeleeAttack() or IsRangedAttack()) and (IsDamageTypePiercing() or IsDamageTypeSlashing() or IsDamageTypeBludgeoning()))) and not IsKillingBlow() and (HasDamageEffectFlag(DamageFlags.AttackAdvantage) or HasAllyWithinRange('SG_Incapacitated',1.5)) and not HasDamageEffectFlag(DamageFlags.AttackDisadvantage) and not AnyEntityIsItem() and not Goon_IsSneakAttackSpell() and HasStatus('DWE_SNEAK_ATTACK_OWN_TURN',context.Source) or (DWE_SneakAttackInterruptCondition() and not IsKillingBlow() and HasStatus('DWE_SNEAK_ATTACK_OWN_TURN',context.Source))" 
// data "Success" "ApplyStatus(OBSERVER_OBSERVER,DWE_CUNNING_STRIKE_WITHDRAW,100,1)"
